<template>
	<require from="/value-converters" /></require>
	<require from="../components/response-message"></require>
  
	<div class="pageContainer">
		<div class="pageBackground">
			<div class="pageContent">
				<div class="generalPageHeader">
					Stockheimer Event Tool
				</div>
				<p>
					This tool is for creating and exporting the websocket event schema for the Stockheimer game. I personally use it to help manage the data, and made it public in case other people want to play around with it.
				</p>
				<p>
					To use this tool, enter in a "Schema Name", then scroll to the bottom and click save. This will create a schema entry for your user for the database. Only the owners can modify their own data. So if you see another schema made by another user, you might be able to view it, but only the owner can modify it. The "Public?" checkmark will allow other users to view your schema, but not modify it.
					You can also view public schemas or your own by clicking a record in the "Schema Records" table.
				</p>
				<p>
					To export with this tool, scroll to the bottom and hit export. When exporting, 2 json objects are created: event_parameters and event_schema.
				</p>
				<hr>
				<div class="listHeader">Schema Records</div>
				<table class="tbl-list" aurelia-table="data.bind: list; display-data.bind: $displayData; current-page.bind: currentPage; page-size.bind: pageSize; total-items.bind: totalItems;">
					<thead>
						<tr>
							<th aut-sort="key: uid">Uid</th>
							<th aut-sort="key: txt_schema_name">Schema Name</th>
							<th aut-sort="key: txt_username">Created By User</th>
							<th aut-sort="key: b_public">Public?</th>
						</tr>
					</thead>
					<tbody>
						<tr repeat.for="n of $displayData" click.delegate="listClicked(n)">
							<td>${n.uid}</td>
							<td>${n.txt_schema_name}</td>
							<td>${n.txt_username}</td>
							<td>${n.b_public}</td>
						</tr>
					</tbody>
				</table>
				<response-message class="responseMessageCustomElement" view-model.ref="msgPageList"></response-message>
				<div class="listPaginationDiv">
					<div>
						<aut-pagination current-page.bind="currentPage" page-size.bind="pageSize" total-items.bind="totalItems" pagination-size.bind="5" boundary-links.bind="true"> </aut-pagination>
					</div>
					
					<div>
						<label for="pageSize">Page Size: </label>
						<select value.bind="pageSize" id="pageSize" class="form-control">
							<option model.bind="5">5</option>
							<option model.bind="10">10</option>
							<option model.bind="20">20</option>
							<option model.bind="50">50</option>
						</select>
					</div>
				</div>
				<div class="formHeader">Schema Record Details</div>			
				<div class="formBody">
					<div class="formRow">
						<div class="formElement25">
							<div class="formElementLabel">Uid</div>
							<div class="formElementValue">
								<input class="formElementInput100" disabled type="text" value.bind="main.uid" />
							</div>
						</div>
						<div class="formElement25">
							<div class="formElementLabel">Created</div>
							<div class="formElementValue">
								<input class="formElementInput100" disabled type="text" value.bind="main.ts_created | formatDate: 'M/D/YYYY HH:mm:ss'" />
							</div>
						</div>
						<div class="formElement25">
							<div class="formElementLabel">Last Updated</div>
							<div class="formElementValue">
								<input class="formElementInput100" disabled type="text" value.bind="main.ts_last_updated | formatDate: 'M/D/YYYY HH:mm:ss'" />
							</div>
						</div>
						<div class="formElement25">
							<div class="formElementLabel">&nbsp;</div>
							<div class="formElementValue">&nbsp;</div>
						</div>
					</div>
			
			
			
					<div class="formRow">
						<div class="formElement50">
							<div class="formElementLabel">Title</div>
							<div class="formElementValue">
								<input class="formElementInput100" type="text" value.bind="main.txt_title" />
							</div>
						</div>
						<div class="formElement50">
							<div class="formElementLabel">URL Slug</div>
							<div class="formElementValue">
								<input class="formElementInput100" type="text" value.bind="main.txt_url_slug" />
							</div>
						</div>
					</div>
			
					<div class="formRow">
						<div class="formElement25">
							<div class="formElementLabel">Published?</div>
							<div class="formElementValue">
								<input type="checkbox" checked.bind="main.b_publish" />
							</div>
						</div>
						<div class="formElement25">
							<div class="formElementLabel">Publish Date</div>
							<div class="formElementValue">
								<input class="formElementInput100" type="text" value.bind="main.ts_publish_date | formatDate:'M/D/YYYY' & updateTrigger:'blur'" />
							</div>
						</div>
					</div>

					<div class="buttonControlDiv">
						<input class="recordButtonRight" type="button" click.delegate="saveRecord()" value="Save" disabled.bind="!isUpdateAllowed" />
						<input class="recordButtonRight" type="button" click.delegate="deleteRecord()" value="Delete" disabled.bind="!isUpdateAllowed" />
						<input class="recordButtonRight" type="button" click.delegate="newRecord()" value="New Record" />
					</div>
					
					<response-message class="responseMessageCustomElement" view-model.ref="msgPageDetails"></response-message>
				</div>


				<div class="formHeader">Schema Record Export</div>
				<div class="formBody">
					<div class="formRow">
						<div class="formElement100">
							<div class="formElementLabel">Export Result</div>
							<div class="formElementValue">
								<textarea class="formElementTextarea100" rows="4"></textarea>
							</div>
						</div>
					<div class="buttonControlDiv">
						<input class="recordButtonRight" type="button" click.delegate="exportRecord()" value="Export" />
					</div>
				</div>

			</div>
		</div>
	</div>
</template>



